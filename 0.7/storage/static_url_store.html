<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Static URL Store &mdash; Encore 0.6.0 documentation</title>
    
    <link rel="stylesheet" href="../_static/enthought_doc.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.6.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../_static/et.ico"/>
    <link rel="top" title="Encore 0.6.0 documentation" href="../index.html" />
    <link rel="up" title="Storage" href="index.html" />
    <link rel="next" title="Dynamic URL Store" href="dynamic_url_store.html" />
    <link rel="prev" title="File System Store" href="filesystem_store.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="dynamic_url_store.html" title="Dynamic URL Store"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="filesystem_store.html" title="File System Store"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Encore 0.6.0 documentation</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Storage</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/e-logo-rev.png" alt="Logo"/>
            </a></p>
  <h4>Previous topic</h4>
  <p class="topless"><a href="filesystem_store.html"
                        title="previous chapter">File System Store</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="dynamic_url_store.html"
                        title="next chapter">Dynamic URL Store</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/storage/static_url_store.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <span class="target" id="module-encore.storage.static_url_store"></span><div class="section" id="static-url-store">
<h1>Static URL Store<a class="headerlink" href="#static-url-store" title="Permalink to this headline">¶</a></h1>
<p>This module contains the <a class="reference internal" href="#encore.storage.static_url_store.StaticURLStore" title="encore.storage.static_url_store.StaticURLStore"><code class="xref py py-class docutils literal"><span class="pre">StaticURLStore</span></code></a> store that communicates
with a remote HTTP server which provides the actual data storage.  This is a
simple read-only store that can be run against a static HTTP server which
provides a json file with all metadata and then serves data from URLs from
another path.  The metadata URL is polled periodically for updates.</p>
<p>A typical static server might be layed out as:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">base_directory</span><span class="o">/</span>
    <span class="n">index</span><span class="o">.</span><span class="n">json</span>
    <span class="n">data</span><span class="o">/</span>
        <span class="n">key1</span>
        <span class="n">key2</span>
        <span class="o">...</span>
</pre></div>
</div>
</div>
<dl class="class">
<dt id="encore.storage.static_url_store.StaticURLStore">
<em class="property">class </em><code class="descclassname">encore.storage.static_url_store.</code><code class="descname">StaticURLStore</code><span class="sig-paren">(</span><em>root_url</em>, <em>data_path</em>, <em>query_path</em>, <em>poll=300</em><span class="sig-paren">)</span><a class="headerlink" href="#encore.storage.static_url_store.StaticURLStore" title="Permalink to this definition">¶</a></dt>
<dd><p>A read-only key-value store that is a front end for data served via URLs</p>
<p>All data is assumed to be served from some root url.  In addition
the store requires knowledge of two paths: a data prefix URL which is a 
partial URL to which the keys will be appended when requesting data, and a
query URL which is a single URL which provides all metadata as a json
encoded file.</p>
<p>For example, an HTTP server may store data at URLs of the form:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">www</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">data</span><span class="o">/&lt;</span><span class="n">key</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>and may store the metadata at:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">www</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">index</span><span class="o">.</span><span class="n">json</span>
</pre></div>
</div>
<p>These would have a root url of &#8220;<a class="reference external" href="http://www.example.com/">http://www.example.com/</a>&#8221;, a data path
of &#8220;data/&#8221; and a query path of &#8220;index.json&#8221;.</p>
<p>All queries are performed using urllib2.urlopen, so this store can be
implemented by an HTTP, FTP or file server which serves static files.  When
connecting, if appropriate credentials are supplied then HTTP authentication
will be used when connecting the remote server</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Since we use urllib2 without any further modifications, HTTPS requests
do not validate the server&#8217;s certificate.</p>
</div>
<p>Because of the limited nature of the interface, this store implementation
is read only, and handles updates via periodic polling of the query prefix
URL.  This guarantees that the viewed data is always consistent, it just may
not be current. Most of the work of querying is done on the client side
using the cached metadata.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>event_manager</strong> &#8211; An event_manager which implements the <a class="reference internal" href="../events/abstract_event_manager.html#encore.events.abstract_event_manager.BaseEventManager" title="encore.events.abstract_event_manager.BaseEventManager"><code class="xref py py-class docutils literal"><span class="pre">BaseEventManager</span></code></a>
API.</li>
<li><strong>root_url</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) &#8211; The base url that data is served from.</li>
<li><strong>data_path</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) &#8211; The URL prefix that the data is served from.</li>
<li><strong>query_path</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) &#8211; The URL that the metadata is served from.</li>
<li><strong>poll</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a>) &#8211; The polling frequency for the polling thread.  Polls every 5 min by default.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="encore.storage.static_url_store.StaticURLStore.connect">
<code class="descname">connect</code><span class="sig-paren">(</span><em>credentials=None</em>, <em>proxy_handler=None</em>, <em>auth_handler_factory=None</em><span class="sig-paren">)</span><a class="headerlink" href="#encore.storage.static_url_store.StaticURLStore.connect" title="Permalink to this definition">¶</a></dt>
<dd><p>Connect to the key-value store, optionally with authentication</p>
<p>This method creates appropriate urllib2 openers for the store.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>credentials</strong> (<a class="reference external" href="http://docs.python.org/library/stdtypes.html#dict" title="(in Python v2.7)"><em>dict</em></a>) &#8211; A dictionary which has at least keys &#8216;username&#8217; and &#8216;password&#8217;
and optional keys &#8216;uri&#8217; and &#8216;realm&#8217;.  The &#8216;uri&#8217; will default to
the root url of the store, and &#8216;realm&#8217; will default to
&#8216;encore.storage&#8217;.</li>
<li><strong>proxy_handler</strong> (<a class="reference external" href="http://docs.python.org/library/urllib2.html#urllib2.ProxyHandler" title="(in Python v2.7)"><em>urllib2.ProxyHandler</em></a>) &#8211; An optional urllib2.ProxyHandler instance.  If none is provided
then urllib2 will create a proxy handler from the user&#8217;s environment
if needed.</li>
<li><strong>auth_handler_factory</strong> &#8211; An optional factory to build urllib2 authenticators.  The credentials
will be passed as keyword arguments to this handler&#8217;s add_password
method.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="encore.storage.static_url_store.StaticURLStore.disconnect">
<code class="descname">disconnect</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#encore.storage.static_url_store.StaticURLStore.disconnect" title="Permalink to this definition">¶</a></dt>
<dd><p>Disconnect from the key-value store</p>
<p>This method disposes or disconnects to any long-lived resources that the
store requires.</p>
</dd></dl>

<dl class="method">
<dt id="encore.storage.static_url_store.StaticURLStore.exists">
<code class="descname">exists</code><span class="sig-paren">(</span><em>key</em><span class="sig-paren">)</span><a class="headerlink" href="#encore.storage.static_url_store.StaticURLStore.exists" title="Permalink to this definition">¶</a></dt>
<dd><p>Test whether or not a key exists in the key-value store</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>key</strong> (<a class="reference external" href="http://docs.python.org/library/string.html#module-string" title="(in Python v2.7)"><em>string</em></a>) &#8211; The key for the resource in the key-value store.  They key is a unique
identifier for the resource within the key-value store.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>exists</strong> (bool) - Whether or not the key exists in the key-value store.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="encore.storage.static_url_store.StaticURLStore.get">
<code class="descname">get</code><span class="sig-paren">(</span><em>key</em><span class="sig-paren">)</span><a class="headerlink" href="#encore.storage.static_url_store.StaticURLStore.get" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve a stream of data and metdata from a given key in the key-value store.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>key</strong> (<a class="reference external" href="http://docs.python.org/library/string.html#module-string" title="(in Python v2.7)"><em>string</em></a>) &#8211; The key for the resource in the key-value store.  They key is a unique
identifier for the resource within the key-value store.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><ul class="simple">
<li><strong>data</strong> (file-like) - A readable file-like object that provides stream of data from the key-value store.  This is the same type of filelike object returned by urllib2&#8217;s urlopen function.</li>
<li><strong>metadata</strong> (dictionary) - A dictionary of metadata for the key.</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><strong>KeyError</strong> - If the key is not found in the store, a KeyError is raised.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="encore.storage.static_url_store.StaticURLStore.get_data">
<code class="descname">get_data</code><span class="sig-paren">(</span><em>key</em><span class="sig-paren">)</span><a class="headerlink" href="#encore.storage.static_url_store.StaticURLStore.get_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve a stream from a given key in the key-value store.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>key</strong> (<a class="reference external" href="http://docs.python.org/library/string.html#module-string" title="(in Python v2.7)"><em>string</em></a>) &#8211; The key for the resource in the key-value store.  They key is a unique
identifier for the resource within the key-value store.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>data</strong> (file-like) - A readable file-like object the that provides stream of data from the key-value store.  This is the same type of filelike object returned by urllib2&#8217;s urlopen function.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><strong>KeyError</strong> - This will raise a key error if the key is not present in the store.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="encore.storage.static_url_store.StaticURLStore.get_metadata">
<code class="descname">get_metadata</code><span class="sig-paren">(</span><em>key</em>, <em>select=None</em><span class="sig-paren">)</span><a class="headerlink" href="#encore.storage.static_url_store.StaticURLStore.get_metadata" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve the metadata for a given key in the key-value store.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>key</strong> (<a class="reference external" href="http://docs.python.org/library/string.html#module-string" title="(in Python v2.7)"><em>string</em></a>) &#8211; The key for the resource in the key-value store.  They key is a unique
identifier for the resource within the key-value store.</li>
<li><strong>select</strong> (<em>iterable of strings or None</em>) &#8211; Which metadata keys to populate in the result.  If unspecified, then
return the entire metadata dictionary.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>metadata</strong> (dict) - A dictionary of metadata associated with the key.  The dictionary has keys as specified by the select argument.  If a key specified in select is not present in the metadata, then it will not be present in the returned value.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><p class="first last"><strong>KeyError</strong> - This will raise a key error if the key is not present in the store.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="encore.storage.static_url_store.StaticURLStore.glob">
<code class="descname">glob</code><span class="sig-paren">(</span><em>pattern</em><span class="sig-paren">)</span><a class="headerlink" href="#encore.storage.static_url_store.StaticURLStore.glob" title="Permalink to this definition">¶</a></dt>
<dd><p>Return keys which match glob-style patterns</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>pattern</strong> (<a class="reference external" href="http://docs.python.org/library/string.html#module-string" title="(in Python v2.7)"><em>string</em></a>) &#8211; Glob-style pattern to match keys with.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>result</strong> (iterable) - A iterable of keys which match the glob pattern.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="encore.storage.static_url_store.StaticURLStore.is_connected">
<code class="descname">is_connected</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#encore.storage.static_url_store.StaticURLStore.is_connected" title="Permalink to this definition">¶</a></dt>
<dd><p>Whether or not the store is currently connected</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><strong>connected</strong> (bool) - Whether or not the store is currently connected.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="encore.storage.static_url_store.StaticURLStore.multiget">
<code class="descname">multiget</code><span class="sig-paren">(</span><em>keys</em><span class="sig-paren">)</span><a class="headerlink" href="#encore.storage.static_url_store.StaticURLStore.multiget" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve the data and metadata for a collection of keys.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>keys</strong> (<em>iterable of strings</em>) &#8211; The keys for the resources in the key-value store.  Each key is a
unique identifier for a resource within the key-value store.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>result</strong> (iterator of (file-like, dict) tuples) - An iterator of (data, metadata) pairs.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><strong>KeyError</strong> - This will raise a key error if the key is not present in the store.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="encore.storage.static_url_store.StaticURLStore.multiget_data">
<code class="descname">multiget_data</code><span class="sig-paren">(</span><em>keys</em><span class="sig-paren">)</span><a class="headerlink" href="#encore.storage.static_url_store.StaticURLStore.multiget_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve the data for a collection of keys.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>keys</strong> (<em>iterable of strings</em>) &#8211; The keys for the resources in the key-value store.  Each key is a
unique identifier for a resource within the key-value store.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>result</strong> (iterator of file-like) - An iterator of file-like data objects corresponding to the keys.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><strong>KeyError</strong> - This will raise a key error if the key is not present in the store.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="encore.storage.static_url_store.StaticURLStore.multiget_metadata">
<code class="descname">multiget_metadata</code><span class="sig-paren">(</span><em>keys</em>, <em>select=None</em><span class="sig-paren">)</span><a class="headerlink" href="#encore.storage.static_url_store.StaticURLStore.multiget_metadata" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve the metadata for a collection of keys in the key-value store.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>keys</strong> (<em>iterable of strings</em>) &#8211; The keys for the resources in the key-value store.  Each key is a
unique identifier for a resource within the key-value store.</li>
<li><strong>select</strong> (<em>iterable of strings or None</em>) &#8211; Which metadata keys to populate in the results.  If unspecified, then
return the entire metadata dictionary.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>metadatas</strong> (iterator of dicts) - An iterator of dictionaries of metadata associated with the key. The dictionaries have keys as specified by the select argument.  If a key specified in select is not present in the metadata, then it will not be present in the returned value.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><p class="first last"><strong>KeyError</strong> - This will raise a key error if the key is not present in the store.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="encore.storage.static_url_store.StaticURLStore.query">
<code class="descname">query</code><span class="sig-paren">(</span><em>select=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#encore.storage.static_url_store.StaticURLStore.query" title="Permalink to this definition">¶</a></dt>
<dd><p>Query for keys and metadata matching metadata provided as keyword arguments</p>
<p>This provides a very simple querying interface that returns precise
matches with the metadata.  If no arguments are supplied, the query
will return the complete set of metadata for the key-value store.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>select</strong> (<em>iterable of strings or None</em>) &#8211; An optional list of metadata keys to return.  If this is not None,
then the metadata dictionaries will only have values for the specified
keys populated.</li>
<li><strong>kwargs</strong> &#8211; Arguments where the keywords are metadata keys, and values are
possible values for that metadata item.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><strong>result</strong> (iterable) - An iterable of (key, metadata) tuples where metadata matches all the specified values for the specified metadata keywords. If a key specified in select is not present in the metadata of a particular key, then it will not be present in the returned value.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="encore.storage.static_url_store.StaticURLStore.query_keys">
<code class="descname">query_keys</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#encore.storage.static_url_store.StaticURLStore.query_keys" title="Permalink to this definition">¶</a></dt>
<dd><p>Query for keys matching metadata provided as keyword arguments</p>
<p>This provides a very simple querying interface that returns precise
matches with the metadata.  If no arguments are supplied, the query
will return the complete set of keys for the key-value store.</p>
<p>This is equivalent to <code class="docutils literal"><span class="pre">self.query(**kwargs).keys()</span></code>, but potentially
more efficiently implemented.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>kwargs</strong> &#8211; Arguments where the keywords are metadata keys, and values are
possible values for that metadata item.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>result</strong> (iterable) - An iterable of key-value store keys whose metadata matches all the specified values for the specified metadata keywords.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="encore.storage.static_url_store.StaticURLStore.to_bytes">
<code class="descname">to_bytes</code><span class="sig-paren">(</span><em>key</em>, <em>buffer_size=1048576</em><span class="sig-paren">)</span><a class="headerlink" href="#encore.storage.static_url_store.StaticURLStore.to_bytes" title="Permalink to this definition">¶</a></dt>
<dd><p>Efficiently store the data associated with a key into a bytes object.</p>
<p>This method can be optionally overriden by subclasses to proved a more
efficient way of copy the data from the underlying data store to a bytes
object.  The default implementation uses the get() method
together with chunked reads from the returned data stream and join.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>key</strong> (<a class="reference external" href="http://docs.python.org/library/string.html#module-string" title="(in Python v2.7)"><em>string</em></a>) &#8211; The key for the resource in the key-value store.  They key is a unique
identifier for the resource within the key-value store.</li>
<li><strong>buffer_size</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) &#8211; An optional indicator of the number of bytes to read at a time.
Implementations are free to ignore this hint or use a different
default if they need to.  The default is 1048576 bytes (1 MiB).</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>bytes</strong>  - The contents of the file-like object as bytes.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Events:</th><td class="field-body"><ul class="first last simple">
<li><strong>StoreProgressStartEvent</strong> - For buffering implementations, this event should be emitted prior to extracting the data.</li>
<li><strong>StoreProgressStepEvent</strong> - For buffering implementations, this event should be emitted periodically as data is extracted.</li>
<li><strong>StoreProgressEndEvent</strong> - For buffering implementations, this event should be emitted after extracting the data.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="encore.storage.static_url_store.StaticURLStore.to_file">
<code class="descname">to_file</code><span class="sig-paren">(</span><em>key</em>, <em>path</em>, <em>buffer_size=1048576</em><span class="sig-paren">)</span><a class="headerlink" href="#encore.storage.static_url_store.StaticURLStore.to_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Efficiently store the data associated with a key into a file.</p>
<p>This method can be optionally overriden by subclasses to proved a more
efficient way of copy the data from the underlying data store to a path
in the filesystem.  The default implementation uses the get() method
together with chunked reads from the returned data stream to the disk.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>key</strong> (<a class="reference external" href="http://docs.python.org/library/string.html#module-string" title="(in Python v2.7)"><em>string</em></a>) &#8211; The key for the resource in the key-value store.  They key is a unique
identifier for the resource within the key-value store.</li>
<li><strong>path</strong> (<a class="reference external" href="http://docs.python.org/library/string.html#module-string" title="(in Python v2.7)"><em>string</em></a>) &#8211; A file system path to store the data to.</li>
<li><strong>buffer_size</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) &#8211; An optional indicator of the number of bytes to read at a time.
Implementations are free to ignore this hint or use a different
default if they need to.  The default is 1048576 bytes (1 MiB).</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Events:</th><td class="field-body"><ul class="first last simple">
<li><strong>StoreProgressStartEvent</strong> - For buffering implementations, this event should be emitted prior to writing any data to disk.</li>
<li><strong>StoreProgressStepEvent</strong> - For buffering implementations, this event should be emitted periodically as data is written to disk.</li>
<li><strong>StoreProgressEndEvent</strong> - For buffering implementations, this event should be emitted after finishing writing to disk.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="encore.storage.static_url_store.StaticURLStore.update_index">
<code class="descname">update_index</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#encore.storage.static_url_store.StaticURLStore.update_index" title="Permalink to this definition">¶</a></dt>
<dd><p>Request the most recent version of the metadata</p>
<p>This downloads the json file at the query_path location, and updates
the local metadata cache with this information.  It then emits events
that represent the difference between the old metadata and the new
metadata.</p>
<p>This method is normally called from the polling thread, but can be called
by other code when needed.  It locks the metadata index whilst performing
the update.</p>
</dd></dl>

</dd></dl>



          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="dynamic_url_store.html" title="Dynamic URL Store"
             >next</a> |</li>
        <li class="right" >
          <a href="filesystem_store.html" title="File System Store"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Encore 0.6.0 documentation</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="index.html" >Storage</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2011-2017, Enthought, Inc..
      Last updated on Jan 19, 2017.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.4.1.
    </div>
  </body>
</html>